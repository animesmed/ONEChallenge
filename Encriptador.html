<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Encriptador - ONE Challenge</title>
        <!--Reseteamos las configuraciones predeterminadas del navegador-->
        <link rel="stylesheet" href="C:/Users/YONI/Desktop/ProgCourse/DesarrolloWeb/1742-HTML5-y-CSS3-parte2-master/reset.css">

        <link rel="stylesheet" href="C:/Users/YONI/Desktop/ONEChallenge/style.css">
    </head>
    <body>
    </body>
</html>
<script>
    var palabraInicial = "hoberlai coberdentergai, tenter sailufatdai tufat timesober loberbenterznober";
    var palabraFinal = "";
    /*Reglas
    La letra "e" es convertida para "enter"
    La letra "i" es convertida para "imes"
    La letra "a" es convertida para "ai"
    La letra "o" es convertida para "ober"
    La letra "u" es convertida para "ufat"
    */
    Transformar(Desencriptar);

    function Transformar(funcion){
        if(ComprobarPalabra(palabraInicial)){
            document.write("Palabra inicial -> "+palabraInicial + "<br>");
            palabraFinal=funcion(palabraInicial);
            document.write("Palabra final -> "+palabraFinal);
        }else{
            document.write("Error!: Palabra no admitida");
        }
    }
    //#region Encriptar
    function Encriptar(palabraInicial){
        for (let i = 0; i < palabraInicial.length; i++) {
            var temp = palabraInicial[i];
            switch (temp) {
                case 'É':
                case 'é':
                case 'e':
                    temp = "enter";
                    break;
                case 'Í':
                case 'í':
                case 'i':
                    temp = "imes";
                    break;
                case 'Á':
                case 'á':
                case 'a':
                    temp = "ai";
                    break;
                case 'Ó':
                case 'ó':
                case 'o':
                    temp = "ober";
                    break;
                case 'Ú':
                case 'ú':
                case 'u':
                    temp = "ufat";
                    break;
                case undefined:
                case null:
                    temp = "?";
                }
            palabraFinal += temp;
        }
        return palabraFinal;
    }
    
    function ComprobarPalabra(palabraInicial){
        if(isNaN(palabraInicial)){
            if(palabraInicial!==null && palabraInicial!==undefined && palabraInicial!==""){
                return palabraInicial.toString().toLowerCase().split();
            }
        }
        document.write("Trata de ingresar una palabra válida<br>");
        return false;
    }
    //#endregion Encriptar
    //#region Desencriptar
    function Desencriptar(palabraInicial){
        var palabraE = palabraInicial;
        for (let i = 0; i < palabraInicial.length; i++) {
            var a = Buscar(palabraE);
            console.log("Mensaje-> "+a);
            if(a!==undefined){
                palabraE = a;
            }else{
                break;
            }
        }
        return palabraE;
    }
    //Busca la secuencia de las palabras
    function Buscar(palabra){
        let i=0;
        let letra;
        for (let i = 0; i < palabra.length; i++) {
            console.log("empieza bucle");
            temp = palabra[i];
            switch (temp) {
                case 'e':
                    if(palabra[i+1] == 'n' &&
                       palabra[i+2] == 't' &&
                       palabra[i+3] == 'e' &&
                       palabra[i+4] == 'r'){
                        console.log("caso e");
                        return RecortarPalabra(palabra,i,'e'); //La palabra dada la recortar
                    }
                    break;
                case 'i':
                    if(palabra[i+1] == 'm' &&
                       palabra[i+2] == 'e' &&
                       palabra[i+3] == 's'){
                        console.log("caso i");
                        return RecortarPalabra(palabra,i,'i');
                       }
                    break;
                case 'a':
                    if(palabra[i+1] == 'i'){
                        console.log("caso a");
                        return RecortarPalabra(palabra,i,'a');
                    }
                    break;
                case 'o':
                    if(palabra[i+1] == 'b' &&
                       palabra[i+2] == 'e' &&
                       palabra[i+3] == 'r'){
                        console.log("caso o");
                        return RecortarPalabra(palabra,i,'o');
                       }
                    break;
                case 'u':
                    if(palabra[i+1] == 'f' &&
                       palabra[i+2] == 'a' &&
                       palabra[i+3] == 't'){
                        console.log("caso u");
                        return RecortarPalabra(palabra,i,'u');
                       }
                    break;
            }
        }
    }

    function RecortarPalabra(palabraInicial,indice,letra){
        let n=0;
        switch (letra) {
            case 'e':
                n=4;
                break;
            case 'a':
                n=1;
                break;
            case 'i':
            case 'o':
            case 'u':
                n=3;
                break;
        }
        return palabraInicial.slice(0,indice) + letra + 
               palabraInicial.slice(indice+n+1,palabraInicial.length);
    }
    //#endregion Desencriptar
</script>